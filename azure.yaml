# yaml-language-server: $schema=https://azuresdkreleasepreview.blob.core.windows.net/azd/schema/azure.yaml.json

name: modern-csharp-web
metadata:
  template: modern-csharp-web@0.0.1-beta
hooks:
  preprovision:
    posix:
      interactive: true
      run: ./infra/scripts/preprovision/whats-my-ip.sh
    windows:
      interactive: true
      run: ./infra/scripts/preprovision/whats-my-ip.ps1
  # postprovision:
  #   posix:
  #     interactive: true
  #     run: ./infra/scripts/postprovision/call-create-app-registrations.sh
  #   windows:
  #     interactive: true
  #     run: ./infra/scripts/postprovision/call-create-app-registrations.ps1
  # skipping while pwsh7 is required because hooks cannot be separated
  # predeploy:
  #   posix:
  #     interactive: true
  #     run: ./infra/scripts/predeploy/call-set-app-configuration.sh
  #   windows:
  #     interactive: true
  #     run: ./infra/scripts/predeploy/call-set-app-configuration.ps1
services:
  web-callcenter-service:
    project: src/Relecloud.Web.CallCenter.Api
    language: csharp
    host: appservice
  web-callcenter-frontend:
    project: src/Relecloud.Web.CallCenter
    language: csharp
    host: appservice
